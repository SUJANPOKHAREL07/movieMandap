generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model user {
    id              String    @id @default(cuid())
    username        String    @unique
    email           String    @unique
    password        String
    createdAt       DateTime  @default(now())
    udpatedAt       DateTime  @default(now()) @updatedAt
    verified        Boolean   @default(false)
    otpVerify       String?   @default("")
    otpExpired      DateTime?
    updateOtp       String?
    updateOtpExpire DateTime?
    resetOtp        String?   @default("")
    resetOtpExpired DateTime?
    role            Role      @default(user)
    login           login[]

    @@unique([email, id])
}

enum Role {
    user
    moderator
    admin
}

model login {
    id            String @id @default(cuid())
    userId        String
    useremail     String
    password      String
    role          Role
    refresh_token String @db.Text()
    user          user?  @relation(fields: [useremail, userId], references: [email, id])
}

model Movie {
    id            String      @id @default(cuid())
    title         String
    originalTitle String?
    overview      String?
    releaseDate   DateTime?
    runtime       Int?
    posterPath    String?
    budget        BigInt?
    revenue       BigInt?
    status        movieStatus @default(IN_PRODUCTION)
    tagline       String?
    adult         Boolean     @default(false)

    @@map("movies")
}

enum movieStatus {
    RELEASED
    IN_PRODUCTION
    POST_PRODUCTION
    PLANNED
    CANCELLED
    RUMORED
}
